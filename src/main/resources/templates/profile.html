
<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="layouts/default">
<!-- begin::Head -->
<head th:replace="fragments/fragment-head-html :: head"></head>
<!-- end::Head -->

<!-- Begin::Body -->
<body
	class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">



	<!-- begin:: Page -->
	<div layout:fragment="content"
		class="m-grid m-grid--hor m-grid--root m-page">
		<!-- begin::Body -->
		<div id="high"
			class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">
			<div class="loader-wrapper" style="display: none;">
				<div id="loader"></div>
			</div>

			<!-- BEGIN: Profile user-->
			<input type="hidden" id="profile_user_id" />
			<!-- END: profile user -->


			<div class="m-grid__item m-grid__item--fluid m-wrapper">


				<!-- begin::Content -->
				<div class="m-content">
					<!-- BEGIN: Subheader -->

					<!-- END: Subheader -->
					<div class="m-content">
						<div class="row">
							<div class="col-xl-3 col-lg-4">
								<div class="m-portlet m-portlet--full-height  ">
									<div class="m-portlet__body">
										<div class="m-card-profile">
											<div class="m-card-profile__title m--hide">Your Profile
											</div>
											<div class="m-card-profile__pic">
												<!-- begin profile pic upload -->
												<form th:if="${profileUser.id == sessionUser.id}"
													target="noTargett" id="profilePictureForm"
													name="profilePictureForm">
													<div title="Click to update profile picture"
														class="profile">
														<div class="photo">
															<input id="input_picture" name="file" type="file"
																accept="image/*" required>
															<div class="photo__helper">
																<div th:if="${profileUser.profilePic != null}"
																	th:style="'background:url('+ @{ ${profileUser.profilePic}} +') no-repeat ; 
        																		-webkit-background-size: cover;
       																			-moz-background-size: cover;
        																		-o-background-size: cover;
      																			background-size: cover;'"
																	class="photo__frame photo__frame--circle">
																	<canvas class="photo__canvas">
																	
																	</canvas>
																	<div class="message is-loading">
																		<i class="fa fa-2x fa-spin fa-spinner"></i>
																	</div>
																	<!-- 																	<div class="message is-dragover"> -->
																	<!-- 																		<i class="fa fa-2x fa-cloud-upload"></i> -->
																	<!-- 																		<p>Drop your photo</p> -->
																	<!-- 																	</div> -->
																	<!-- 																	<div class="message is-wrong-file-type"> -->
																	<!-- 																		<p>Only images allowed.</p> -->
																	<!-- 																		<p class="message--desktop">Drop your photo here -->
																	<!-- 																			or browse your computer.</p> -->
																	<!-- 																		<p class="message--mobile">Tap here to select your -->
																	<!-- 																			picture.</p> -->
																	<!-- 																	</div> -->
																	<!-- 																	<div class="message is-wrong-image-size"> -->
																	<!-- 																		<p>Your photo must be larger than 350px.</p> -->
																	<!-- 																	</div> -->
																</div>

																<div th:if="${profileUser.profilePic == null}"
																	style="background: url('assets/app/media/img/users/user-icon.png') no-repeat; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover;"
																	class="photo__frame photo__frame--circle">
																	<canvas class="photo__canvas">
																	
																	</canvas>
																	<div class="message is-loading">
																		<i class="fa fa-2x fa-spin fa-spinner"></i>
																	</div>
																	<!-- 																	<div class="message is-dragover"> -->
																	<!-- 																		<i class="fa fa-2x fa-cloud-upload"></i> -->
																	<!-- 																		<p>Drop your photo</p> -->
																	<!-- 																	</div> -->
																	<!-- 																	<div class="message is-wrong-file-type"> -->
																	<!-- 																		<p>Only images allowed.</p> -->
																	<!-- 																		<p class="message--desktop">Drop your photo here -->
																	<!-- 																			or browse your computer.</p> -->
																	<!-- 																		<p class="message--mobile">Tap here to select your -->
																	<!-- 																			picture.</p> -->
																	<!-- 																	</div> -->
																	<!-- 																	<div class="message is-wrong-image-size"> -->
																	<!-- 																		<p>Your photo must be larger than 350px.</p> -->
																	<!-- 																	</div> -->
																</div>
															</div>

														</div>
													</div>

													<!-- 													<button class="btn m-btn--pill m-btn--air         btn-info btn-sm" style="display: none;margin-top: -50px;" id="btnSubmitProfilePicture" type="submit">Save</button> -->
												</form>
												<!-- end profile pic upload -->
												<!-- 													<img src="assets/app/media/img/users/user4.jpg" alt="" /> -->
												<!-- 												</div> -->
												<div
													th:if="${profileUser.id != sessionUser.id && profileUser.profilePic != null}"
													style="margin: 20px 0 35px 0;" class="profile">
													<div class="photo">
														<img style="width: 130px; height: 130px;"
															th:src="@{ ${profileUser.profilePic}}" />
													</div>
												</div>

												<div
													th:if="${profileUser.id != sessionUser.id && profileUser.profilePic == null}"
													style="margin: 20px 0 35px 0;" class="profile">
													<div class="photo-wrapper">
														<img src="assets/app/media/img/users/user-icon.png" alt="" />
													</div>
												</div>
											</div>
											<div class="m-card-profile__details">
												<span
													th:text="${profileUser.firstName + ' ' + profileUser.lastName}"
													class="m-card-profile__name">Mark Andre</span> <span
													th:text="${profileUser.email}"
													class="m-card-profile__email m-link">mark.andre@gmail.com</span>
											</div>
										</div>

										<ul th:if="${profileUser.id == sessionUser.id}"
											class="m-nav m-nav--hover-bg m-portlet-fit--sides">
											<li class="m-nav__separator m-nav__separator--fit"></li>
											<li class="m-nav__section m--hide"><span
												class="m-nav__section-text">Section</span></li>
											<li class="m-nav__item"><a data-toggle="modal"
												data-target="#modal_update_user_infos"
												onclick="populateModalUpdateInfos()" href="#"
												class="m-nav__link"> <i
													class="m-nav__link-icon flaticon-profile-1"></i> <span
													class="m-nav__link-title"> <span
														class="m-nav__link-wrap"> <span
															class="m-nav__link-text">Update Informations</span> <!-- 															<span -->
															<!-- 															class="m-nav__link-badge"><span --> <!-- 																class="m-badge m-badge--success">2</span></span> -->
													</span>
												</span>
											</a></li>
										</ul>
										<!-- 											<li class="m-nav__item"><a -->
										<!-- 												href="indexa80c.html?page=header/profile&amp;demo=default" -->
										<!-- 												class="m-nav__link"> <i -->
										<!-- 													class="m-nav__link-icon flaticon-share"></i> <span -->
										<!-- 													class="m-nav__link-text">Activity</span> -->
										<!-- 											</a></li> -->
										<!-- 											<li class="m-nav__item"><a -->
										<!-- 												href="indexa80c.html?page=header/profile&amp;demo=default" -->
										<!-- 												class="m-nav__link"> <i -->
										<!-- 													class="m-nav__link-icon flaticon-chat-1"></i> <span -->
										<!-- 													class="m-nav__link-text">Messages</span> -->
										<!-- 											</a></li> -->
										<!-- 											<li class="m-nav__item"><a -->
										<!-- 												href="indexa80c.html?page=header/profile&amp;demo=default" -->
										<!-- 												class="m-nav__link"> <i -->
										<!-- 													class="m-nav__link-icon flaticon-graphic-2"></i> <span -->
										<!-- 													class="m-nav__link-text">Sales</span> -->
										<!-- 											</a></li> -->
										<!-- 											<li class="m-nav__item"><a -->
										<!-- 												href="indexa80c.html?page=header/profile&amp;demo=default" -->
										<!-- 												class="m-nav__link"> <i -->
										<!-- 													class="m-nav__link-icon flaticon-time-3"></i> <span -->
										<!-- 													class="m-nav__link-text">Events</span> -->
										<!-- 											</a></li> -->
										<!-- 											<li class="m-nav__item"><a -->
										<!-- 												href="indexa80c.html?page=header/profile&amp;demo=default" -->
										<!-- 												class="m-nav__link"> <i -->
										<!-- 													class="m-nav__link-icon flaticon-lifebuoy"></i> <span -->
										<!-- 													class="m-nav__link-text">Support</span> -->
										<!-- 											</a></li> -->
										<!-- 										</ul> -->

										<div class="m-portlet__body-separator"></div>



										<div class="m-widget1 m-widget1--paddingless">
											<div class="m-widget1__item">
												<div class="row m-row--no-padding align-items-center">
													<div class="col">
														<h3 class="m-widget1__title">Projects</h3>
														<span class="m-widget1__desc">Total projects
															contributions</span>
													</div>
													<div class="col m--align-right">
														<span id="profile_all_projects_count"
															class="m-widget1__number m--font-info">-</span>
													</div>
												</div>
											</div>
											<div class="m-widget1__item">
												<div class="row m-row--no-padding align-items-center">
													<div class="col">
														<h3 class="m-widget1__title">Tasks</h3>
														<span class="m-widget1__desc">Total tasks
															contributions</span>
													</div>
													<div class="col m--align-right">
														<span id="profile_all_tasks_count"
															class="m-widget1__number m--font-success">-</span>
													</div>
												</div>
											</div>
											<div class="m-widget1__item">
												<div class="row m-row--no-padding align-items-center">
													<div class="col">
														<h3 class="m-widget1__title">Issues</h3>
														<span class="m-widget1__desc">Total issues
															contributions</span>
													</div>
													<div class="col m--align-right">
														<span id="profile_all_issues_count"
															class="m-widget1__number m--font-danger">-</span>
													</div>
												</div>
											</div>
										</div>


									</div>
								</div>
							</div>
							<div class="col-xl-9 col-lg-8">
								<div class="m-portlet m-portlet--full-height m-portlet--tabs  ">
									<div class="m-portlet__head">
										<div class="m-portlet__head-tools">
											<ul
												class="nav nav-tabs m-tabs m-tabs-line   m-tabs-line--left m-tabs-line--primary"
												role="tablist">
												<li class="nav-item m-tabs__item"><a
													class="nav-link m-tabs__link active" data-toggle="tab"
													href="#m_user_profile_tab_1" role="tab"> <i
														class="flaticon-share m--hide"></i> Overview
												</a></li>
												<li class="nav-item m-tabs__item"><a
													id="my-tasks-nav-link" class="nav-link m-tabs__link"
													data-toggle="tab" href="#m_user_profile_tab_2" role="tab">
														Tasks </a></li>
												<li class="nav-item m-tabs__item"><a
													id="my-issues-nav-link" class="nav-link m-tabs__link"
													data-toggle="tab" href="#m_user_profile_tab_3" role="tab">
														Issues </a></li>
											</ul>
										</div>

									</div>
									<div class="tab-content">
										<div class="tab-pane active" id="m_user_profile_tab_1">


											<div class="m-portlet">
												<div class="m-portlet__body  m-portlet__body--no-padding">

													<!-- 													<div class="row m-row--no-padding m-row--col-separator-xl"> -->
													<!-- 														<div class="col-md-12 col-lg-12 col-xl-4"> -->
													<!-- 															begin:: Widgets/Stats2-1 -->
													<!-- 															<div class="m-widget1"> -->
													<!-- 																<div class="m-widget1__item"> -->
													<!-- 																	<div class="row m-row--no-padding align-items-center"> -->
													<!-- 																		<div class="col"> -->
													<!-- 																			<h3 class="m-widget1__title m--font-info">Total -->
													<!-- 																				Projects</h3> -->
													<!-- 																													<span class="m-widget1__desc">All tasks count</span> -->
													<!-- 																		</div> -->
													<!-- 																		<div class="col m--align-right"> -->
													<!-- 																			<span id="profile_all_projects_count" -->
													<!-- 																				class="m-widget1__number m--font-info">-</span> -->
													<!-- 																		</div> -->
													<!-- 																	</div> -->
													<!-- 																</div> -->


													<!-- 															</div> -->
													<!-- 															end:: Widgets/Stats2-1 -->
													<!-- 														</div> -->
													<!-- 														<div class="col-md-12 col-lg-12 col-xl-4"> -->
													<!-- 															begin:: Widgets/Stats2-2 -->
													<!-- 															<div class="m-widget1"> -->
													<!-- 																<div class="m-widget1__item"> -->
													<!-- 																	<div class="row m-row--no-padding align-items-center"> -->
													<!-- 																		<div class="col"> -->
													<!-- 																			<h3 class="m-widget1__title m--font-success">Tasks</h3> -->
													<!-- 																													<span class="m-widget1__desc">Open tasks percentage</span> -->
													<!-- 																		</div> -->
													<!-- 																		<div class="col m--align-right"> -->
													<!-- 																			<span id="profile_all_tasks_count" -->
													<!-- 																				class="m-widget1__number m--font-success">-</span> -->
													<!-- 																		</div> -->
													<!-- 																	</div> -->
													<!-- 																</div> -->


													<!-- 															</div> -->
													<!-- 															begin:: Widgets/Stats2-2 -->
													<!-- 														</div> -->
													<!-- 														<div class="col-md-12 col-lg-12 col-xl-4"> -->
													<!-- 															begin:: Widgets/Stats2-3 -->
													<!-- 															<div class="m-widget1"> -->


													<!-- 																<div class="m-widget1__item"> -->
													<!-- 																	<div class="row m-row--no-padding align-items-center"> -->
													<!-- 																		<div class="col"> -->
													<!-- 																			<h3 class="m-widget1__title m--font-danger">Issues</h3> -->
													<!-- 																													<span class="m-widget1__desc">Closed tasks percentage</span> -->
													<!-- 																		</div> -->
													<!-- 																		<div class="col m--align-right"> -->
													<!-- 																			<span id="profile_all_issues_count" -->
													<!-- 																				class="m-widget1__number m--font-danger">-</span> -->
													<!-- 																		</div> -->
													<!-- 																	</div> -->
													<!-- 																</div> -->
													<!-- 															</div> -->
													<!-- 															begin:: Widgets/Stats2-3 -->
													<!-- 														</div> -->
													<!-- 													</div> -->






													<div style="background: rgb(242, 242, 242, 0.8);"
														class="row m-row--no-padding m-row--col-separator-xl">

														<div class="col-xl-6">
															<!--begin:: Widgets/Daily Sales-->
															<div class="m-widget14">
																<div class="m-widget14__header">
																	<h3 class="m-widget14__title m--font-info">Closed
																		Tasks</h3>
																	<span
																		th:text="${'Tasks closure assured by ' + profileUser.firstName + ' since registration '}"
																		class="m-widget14__desc m--font-info"> </span>
																</div>
																<div class="profilechartwrapper" style="height: 200px;">
																	<!--begin:: tasks stats Portlet-->

																	<div class="profilechartdiv"
																		id="user_closed_tasks_chart"></div>

																	<!--end:: tasks stats Portlet-->
																</div>
															</div>
															<!--end:: Widgets/Daily Sales-->
														</div>
														<div class="col-xl-6">
															<!--begin:: Widgets/Profit Share-->
															<div class="m-widget14">
																<div class="m-widget14__header">
																	<h3 class="m-widget14__title m--font-focus">Closed
																		Issues</h3>
																	<span
																		th:text="${'Issues closure assured by ' + profileUser.firstName + ' since registration'}"
																		class="m-widget14__desc m--font-focus"> </span>
																</div>
																<div class="profilechartwrapper" style="height: 200px;">
																	<!--begin:: issues stats Portlet-->

																	<div class="profilechartdiv"
																		id="user_closed_issues_chart"></div>

																	<!--end:: tasks stats Portlet-->
																</div>
															</div>
															<!--end:: Widgets/Profit Share-->
														</div>
													</div>
												</div>
											</div>


										</div>
										<div class="tab-pane " id="m_user_profile_tab_2">
											<div
												th:replace="fragments/profile-fragments/fragment-user-tasks :: fragment-user-tasks"></div>

										</div>
										<div class="tab-pane " id="m_user_profile_tab_3">
											<div
												th:replace="fragments/profile-fragments/fragment-user-issues :: fragment-user-issues"></div>

										</div>
									</div>
								</div>
							</div>
						</div>
					</div>



				</div>

				<div th:if="${profileUser.id == sessionUser.id}"
					th:replace="fragments/profile-fragments/fragment-update-user-infos :: update-user-infos"></div>

				<div th:if="${profileUser.id == sessionUser.id}"
					th:replace="fragments/profile-fragments/fragment-update-password :: update-password"></div>



				<iframe width="0" height="0" border="0" name="noTargett"
					id="noTargett"></iframe>

				<script th:inline="javascript" type="text/javascript">
					$(document).ready(
							function() {

								let searchParams = new URLSearchParams(
										window.location.search);
								let param = searchParams.get('id');
								$('#profile_user_id').attr('value', param);

								DatatableUserTasksJsonRemote.init();
								DatatableUserIssuesJsonRemote.init();
								userClosedTasksChart.init();
								userClosedIssuesChart.init();
								populateProfileStats();

							});
				</script>

				<script type="text/javascript"
					src="assets/omniapp/js/datatable-user-tasks.js">
					
				</script>

				<script type="text/javascript"
					src="assets/omniapp/js/datatable-user-issues.js">
					
				</script>

				<script type="text/javascript"
					src="assets/omniapp/js/profile.scripts.js">
					
				</script>

				<script th:if="${profileUser.id == sessionUser.id}"
					type="text/javascript"
					src="assets/omniapp/js/profile.picture.upload.js">
					
				</script>

				<script type="text/javascript"
					src="assets/omniapp/js/profile.charts.js">
					
				</script>

				<script type="text/javascript"
					src="assets/omniapp/vendors/amCharts/amcharts.js">
					
				</script>

				<script type="text/javascript"
					src="assets/omniapp/vendors/amCharts/serial.js">
					
				</script>

				<script
					src="assets/omniapp/vendors/amCharts/plugins/animate/animate.min.js"
					type="text/javascript"></script>
				
				<script src="assets/omniapp/vendors/amCharts/themes/light.js"
					type="text/javascript"></script>
				<script src="assets/omniapp/vendors/amCharts/themes/patterns.js"
					type="text/javascript"></script>
				<script src="assets/omniapp/vendors/amCharts/themes/dark.js"
					type="text/javascript"></script>

				<!-- End::Content -->
			</div>
		</div>
		<!-- end:: Body -->









	</div>
	<!-- end:: Page -->


</body>
<!-- end::Body -->

</html>